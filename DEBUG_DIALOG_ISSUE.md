# 运动对话框调试指南

## 问题现象
用户反映点击日历日期后，运动选择列表仍然没有显示出来。

## 调试步骤

### 1. 检查是否使用了最新的APK
确保您下载并安装了最新构建的APK文件：
- 访问: https://github.com/deanGuo1987/exercise-tracker/actions
- 查找最新的成功构建（绿色勾号）
- 下载 `exercise-tracker-debug-apk` 文件
- 解压并安装新的APK

### 2. 查看应用日志
我已经在代码中添加了详细的调试日志。您可以通过以下方式查看：

#### 方法A: 使用ADB命令（推荐）
```bash
# 连接手机到电脑，启用USB调试
adb logcat | grep -E "(MainActivity|ExerciseDialog)"
```

#### 方法B: 使用Android Studio
1. 打开Android Studio
2. 连接设备
3. 打开 Logcat 窗口
4. 过滤标签: `MainActivity` 或 `ExerciseDialog`

### 3. 预期的日志输出
当您点击日历日期时，应该看到以下日志：

```
D/MainActivity: 显示运动选择对话框，日期: 2025-01-09
D/MainActivity: 对话框已调用show方法
D/ExerciseDialog: 创建对话框，日期: 2025-01-09, 选项数量: 4
```

当您选择选项时，应该看到：
```
D/ExerciseDialog: 用户选择了选项: 1
D/ExerciseDialog: 选择：运动 20分钟
D/MainActivity: 收到对话框结果: exercised=true, duration=20
```

### 4. 可能的问题和解决方案

#### 问题1: 没有看到任何日志
**原因**: 可能还在使用旧版APK
**解决**: 确保下载并安装最新的APK

#### 问题2: 看到"显示运动选择对话框"但没有看到"创建对话框"
**原因**: DialogFragment创建失败
**解决**: 检查是否有异常日志

#### 问题3: 看到"创建对话框"但对话框不显示
**原因**: AlertDialog显示失败
**解决**: 可能是主题或权限问题

#### 问题4: 对话框显示但没有选项列表
**原因**: setItems()方法失败
**解决**: 检查options数组是否正确

### 5. 手动测试步骤
1. 启动应用
2. 点击日历上的任意日期（确保该日期没有现有记录）
3. 应该弹出对话框，标题为"运动记录"
4. 对话框应该显示4个选项：
   - 未运动
   - 运动 20分钟
   - 运动 30分钟
   - 运动 40分钟
5. 点击任一选项应该关闭对话框并保存记录

### 6. 如果问题仍然存在
请提供以下信息：
1. 使用的APK版本（从GitHub Actions下载的时间）
2. 完整的logcat输出
3. 设备型号和Android版本
4. 具体的操作步骤和现象描述

## 代码修改说明
我已经添加了以下调试日志：

### ExerciseDialog.kt
- 对话框创建时的日志
- 用户选择选项时的日志
- 每个选择分支的详细日志

### MainActivity.kt  
- 调用对话框时的日志
- 接收对话框结果时的日志

这些日志将帮助我们精确定位问题所在。

---
**创建时间**: 2025-01-09
**状态**: 等待网络恢复后推送到GitHub